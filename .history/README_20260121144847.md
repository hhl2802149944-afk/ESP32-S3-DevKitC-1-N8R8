# Manta Robot Control System (Hello_Manta)

This project, titled **Hello_Manta**, is the core firmware and control system for the **Manta Robot**, based on the **ESP32-S3 (N8R8)** development board. It features a Bluetooth Low Energy (BLE) server and a web-based dashboard for real-time motor and lighting control.

## üöÄ Features

- **BLE Control**: Uses the NimBLE stack for low-latency, memory-efficient Bluetooth communication.
- **Web Dashboard**: A browser-based interface utilizing the **Web Bluetooth API** to connect directly to the robot without needing an app or a router.
- **Dual Stepper Motor Drive**: Robust pulse-task implementation for driving two stepper motors.
- **Addressable RGB Control**: Integrated `led_strip` component to control the robot's onboard light.
- **PSRAM Optimized**: Configured specifically for the **N8R8** module (8MB Octal SPI Flash & 8MB Octal SPI PSRAM).

## üõ†Ô∏è Hardware Setup

### Device: ESP32-S3-DevKitC-1-N8R8
> **Note**: Pin selection is optimized to avoid conflicts with Octal SPI (GPIO 33-37) used by the N8R8 module.

| Part | Pin | Function |
| :--- | :--- | :--- |
| **RGB LED** | GPIO 38 | LED Strip Data |
| **Motor 1** | GPIO 4, 5, 6, 7 | AIN1, AIN2, PWMA, BIN1 |
| | GPIO 9, 10, 21 | BIN2, PWMB, STBY |
| **Motor 2** | GPIO 1, 2, 3, 8 | AIN1, AIN2, PWMA, BIN1 |
| | GPIO 11, 13, 14 | BIN2, PWMB, STBY |

## üìÅ Project Structure

- `main/hello_manta.cpp`: Application entry point, motor logic, and system setup.
- `main/ble_server.cpp`: BLE GAP/GATT server implementation for receiving commands.
- `main/web/`: Frontend dashboard (`index.html` & `main.js`).
- `sdkconfig.defaults`: Optimized ESP-IDF settings for Bluetooth and PSRAM.

## üíª How to Use

### 1. Build and Flash
```bash
idf.py build flash monitor
```

### 2. Connect via Web
1. Open `main/web/index.html` in an updated **Chrome** or **Edge** browser.
2. Click **"Connect Console (BLE)"**.
3. Select the device named `ESP32S3-Motor-Control`.
4. Use the controls to move the robot or change the RGB colors.

## ‚ö†Ô∏è Important Build Notes
If the build fails with an internal compiler error in `esp_lcd`, note that the project's `CMakeLists.txt` automatically excludes the `esp_lcd` component to bypass a known toolchain bug in some versions of ESP-IDF v5.x.

